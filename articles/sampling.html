<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Learn how to use sample_* functions.
">
<title>sampling • sgsR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="sampling">
<meta property="og:description" content="Learn how to use sample_* functions.
">
<meta property="og:image" content="/reference/figures/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script><script defer data-domain="pkgdown.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sgsR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.3.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/sgsR.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/calculating.html">calculating</a>
    <a class="dropdown-item" href="../articles/sampling.html">sampling</a>
    <a class="dropdown-item" href="../articles/stratification.html">stratification</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tgoodbody/sgsR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>sampling</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tgoodbody/sgsR/blob/HEAD/vignettes/sampling.Rmd" class="external-link"><code>vignettes/sampling.Rmd</code></a></small>
      <div class="d-none name"><code>sampling.Rmd</code></div>
    </div>

    
    
<p>Currently, there are 8 functions associated with the
<code>sample</code> verb in the <code>sgsR</code> package:</p>
<ul>
<li><p><code><a href="../reference/sample_srs.html">sample_srs()</a></code> - simple random sampling</p></li>
<li><p><code><a href="../reference/sample_systematic.html">sample_systematic()</a></code>- systematic sampling in a grid
or hexagon tessellation</p></li>
<li><p><code><a href="../reference/sample_strat.html">sample_strat()</a></code> - stratified sampling within a
<code>sraster</code></p></li>
<li><p><code><a href="../reference/sample_nc.html">sample_nc()</a></code> - Nearest centroid sampling. See <a href="https://doi.org/10.1080/00049158.2016.1218265" class="external-link">Melville &amp;
Stone (2016)</a></p></li>
<li><p><code><a href="../reference/sample_clhs.html">sample_clhs()</a></code> - Latin hypercube sampling</p></li>
<li><p><code><a href="../reference/sample_balanced.html">sample_balanced()</a></code> - see <a href="http://www.antongrafstrom.se/balancedsampling/" class="external-link">BalancedSampling</a></p></li>
<li><p><code><a href="../reference/sample_ahels.html">sample_ahels()</a></code> - adapted hypercube evaluation of a
legacy sample (ahels)</p></li>
<li><p><code><a href="../reference/sample_existing.html">sample_existing()</a></code> - Sub-sample within an existing
sample using <a href="https://CRAN.R-project.org/package=clhs" class="external-link">clhs</a></p></li>
</ul>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="access">Access<a class="anchor" aria-label="anchor" href="#access"></a>
</h2>
<p>One key feature of using some <code>sample_*</code> functions is its
ability to define <code>access</code> corridors. Users can supply a road
<code>access</code> network (must be <code>sf</code> line objects) and
define buffers around <code>access</code> where samples should be
excluded and included.</p>
<p>Relevant and applicable parameters when <code>access</code> is
defined are:</p>
<ul>
<li><p><code>buff_inner</code> - Can be left as <code>NULL</code>
(default). Inner buffer parameter that defines the distance from
<code>access</code> where samples cannot be taken (i.e. if you don’t
want samples within 50 m of your <code>access</code> layer set
<code>buff_inner = 50</code>).</p></li>
<li><p><code>buff_outer</code> - Outer buffer parameter that defines the
maximum distance that the samples can be located from
<code>access</code> (i.e. if you don’t want samples more than 200 meters
from your <code>access</code> layer set
<code>buff_inner = 200</code>).</p></li>
</ul>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="srs">
<code>sample_srs</code><a class="anchor" aria-label="anchor" href="#srs"></a>
</h2>
<p>We have demonstrated a simple example of using the
<code><a href="../reference/sample_srs.html">sample_srs()</a></code> function in <code><a href="../articles/sgsR.html">vignette("sgsR")</a></code>. We
will demonstrate additional examples below.</p>
<p>The input required for <code><a href="../reference/sample_srs.html">sample_srs()</a></code> is a
<code>raster</code>. This means that <code>sraster</code> and
<code>mraster</code> are supported for this function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- perform simple random sampling ---#</span></span>
<span><span class="fu"><a href="../reference/sample_srs.html">sample_srs</a></span><span class="op">(</span>raster <span class="op">=</span> <span class="va">sraster</span>, <span class="co"># input sraster</span></span>
<span>           nSamp <span class="op">=</span> <span class="fl">200</span>, <span class="co"># number of desired samples</span></span>
<span>           plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 200 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431110 ymin: 5337750 xmax: 438490 ymax: 5343230</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                  geometry</span></span>
<span><span class="co">#&gt; 1  POINT (436830 5342370)</span></span>
<span><span class="co">#&gt; 2  POINT (436830 5342370)</span></span>
<span><span class="co">#&gt; 3  POINT (431810 5341230)</span></span>
<span><span class="co">#&gt; 4  POINT (436070 5341890)</span></span>
<span><span class="co">#&gt; 5  POINT (434830 5342250)</span></span>
<span><span class="co">#&gt; 6  POINT (433210 5341770)</span></span>
<span><span class="co">#&gt; 7  POINT (432710 5343210)</span></span>
<span><span class="co">#&gt; 8  POINT (433350 5338530)</span></span>
<span><span class="co">#&gt; 9  POINT (432570 5338470)</span></span>
<span><span class="co">#&gt; 10 POINT (431790 5341610)</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sample_srs.html">sample_srs</a></span><span class="op">(</span>raster <span class="op">=</span> <span class="va">mraster</span>, <span class="co"># input mraster</span></span>
<span>           nSamp <span class="op">=</span> <span class="fl">200</span>, <span class="co"># number of desired samples</span></span>
<span>           access <span class="op">=</span> <span class="va">access</span>, <span class="co"># define access road network</span></span>
<span>           mindist <span class="op">=</span> <span class="fl">200</span>, <span class="co"># minimum distance samples must be apart from one another</span></span>
<span>           buff_inner <span class="op">=</span> <span class="fl">50</span>, <span class="co"># inner buffer - no samples within this distance from road</span></span>
<span>           buff_outer <span class="op">=</span> <span class="fl">200</span>, <span class="co"># outer buffer - no samples further than this distance from road</span></span>
<span>           plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 200 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431150 ymin: 5337730 xmax: 438550 ymax: 5343210</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                  geometry</span></span>
<span><span class="co">#&gt; 1  POINT (432970 5342770)</span></span>
<span><span class="co">#&gt; 2  POINT (435370 5338210)</span></span>
<span><span class="co">#&gt; 3  POINT (437510 5342010)</span></span>
<span><span class="co">#&gt; 4  POINT (438050 5340450)</span></span>
<span><span class="co">#&gt; 5  POINT (434290 5340710)</span></span>
<span><span class="co">#&gt; 6  POINT (438430 5338790)</span></span>
<span><span class="co">#&gt; 7  POINT (433550 5341670)</span></span>
<span><span class="co">#&gt; 8  POINT (433430 5342030)</span></span>
<span><span class="co">#&gt; 9  POINT (433710 5343170)</span></span>
<span><span class="co">#&gt; 10 POINT (432510 5340750)</span></span></code></pre>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="systematic">
<code>sample_systematic</code><a class="anchor" aria-label="anchor" href="#systematic"></a>
</h2>
<p>The <code><a href="../reference/sample_systematic.html">sample_systematic()</a></code> function applies systematic
sampling across an area with the <code>cellsize</code> parameter
defining the resolution of the tessellation. The tessellation shape can
be modified using the <code>square</code> parameter. Assigning
<code>TRUE</code> (default) to the <code>square</code> parameter results
in a regular grid and assigning <code>FALSE</code> results in a
hexagonal grid. The location of samples can also be adjusted using the
<code>locations</code> parameter, where <code>centers</code> takes the
center, <code>corners</code> takes all corners, and <code>random</code>
takes a random location within each tessellation.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- perform grid sampling ---#</span></span>
<span><span class="fu"><a href="../reference/sample_systematic.html">sample_systematic</a></span><span class="op">(</span>raster <span class="op">=</span> <span class="va">sraster</span>, <span class="co"># input sraster</span></span>
<span>                  cellsize <span class="op">=</span> <span class="fl">1000</span>, <span class="co"># grid distance</span></span>
<span>                  plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 34 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431486.7 ymin: 5337743 xmax: 438505.2 ymax: 5343091</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                    geometry</span></span>
<span><span class="co">#&gt; 1  POINT (435426.3 5337743)</span></span>
<span><span class="co">#&gt; 2  POINT (436391.7 5338004)</span></span>
<span><span class="co">#&gt; 3  POINT (437357.1 5338265)</span></span>
<span><span class="co">#&gt; 4  POINT (438322.4 5338525)</span></span>
<span><span class="co">#&gt; 5  POINT (432269.3 5337926)</span></span>
<span><span class="co">#&gt; 6  POINT (433234.7 5338187)</span></span>
<span><span class="co">#&gt; 7  POINT (434200.1 5338447)</span></span>
<span><span class="co">#&gt; 8  POINT (435165.4 5338708)</span></span>
<span><span class="co">#&gt; 9  POINT (438061.6 5339491)</span></span>
<span><span class="co">#&gt; 10 POINT (432973.8 5339152)</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- perform grid sampling ---#</span></span>
<span><span class="fu"><a href="../reference/sample_systematic.html">sample_systematic</a></span><span class="op">(</span>raster <span class="op">=</span> <span class="va">sraster</span>, <span class="co"># input sraster</span></span>
<span>                  cellsize <span class="op">=</span> <span class="fl">500</span>, <span class="co"># grid distance</span></span>
<span>                  square <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># hexagonal tessellation</span></span>
<span>                  location <span class="op">=</span> <span class="st">"random"</span>, <span class="co"># random sample within tessellation</span></span>
<span>                  plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 165 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431111.7 ymin: 5337722 xmax: 438509.9 ymax: 5343190</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                    geometry</span></span>
<span><span class="co">#&gt; 1  POINT (435917.3 5343190)</span></span>
<span><span class="co">#&gt; 2  POINT (437437.8 5343087)</span></span>
<span><span class="co">#&gt; 3  POINT (433798.6 5343187)</span></span>
<span><span class="co">#&gt; 4  POINT (435411.5 5343132)</span></span>
<span><span class="co">#&gt; 5  POINT (436253.9 5343189)</span></span>
<span><span class="co">#&gt; 6  POINT (438029.8 5342760)</span></span>
<span><span class="co">#&gt; 7  POINT (433354.4 5343152)</span></span>
<span><span class="co">#&gt; 8  POINT (434973.3 5343117)</span></span>
<span><span class="co">#&gt; 9  POINT (435714.8 5342900)</span></span>
<span><span class="co">#&gt; 10 POINT (436746.6 5342845)</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sample_systematic.html">sample_systematic</a></span><span class="op">(</span>raster <span class="op">=</span> <span class="va">sraster</span>, <span class="co"># input sraster</span></span>
<span>            cellsize <span class="op">=</span> <span class="fl">500</span>, <span class="co"># grid distance</span></span>
<span>            access <span class="op">=</span> <span class="va">access</span>, <span class="co"># define access road network</span></span>
<span>            buff_outer <span class="op">=</span> <span class="fl">200</span>, <span class="co"># outer buffer - no samples further than this distance from road</span></span>
<span>            square <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># hexagonal tessellation</span></span>
<span>            location <span class="op">=</span> <span class="st">"corners"</span>, <span class="co"># take corners instead of centers</span></span>
<span>            plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 602 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431262.5 ymin: 5337777 xmax: 438464.2 ymax: 5343169</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                    geometry</span></span>
<span><span class="co">#&gt; 1  POINT (431749.9 5337784)</span></span>
<span><span class="co">#&gt; 2  POINT (431749.9 5337784)</span></span>
<span><span class="co">#&gt; 3  POINT (432022.8 5337878)</span></span>
<span><span class="co">#&gt; 4  POINT (432022.8 5337878)</span></span>
<span><span class="co">#&gt; 5  POINT (431749.9 5337784)</span></span>
<span><span class="co">#&gt; 6  POINT (431859.7 5338350)</span></span>
<span><span class="co">#&gt; 7  POINT (432022.8 5337878)</span></span>
<span><span class="co">#&gt; 8  POINT (432022.8 5337878)</span></span>
<span><span class="co">#&gt; 9  POINT (431859.7 5338350)</span></span>
<span><span class="co">#&gt; 10 POINT (431914.7 5338634)</span></span></code></pre>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="sstrat">
<code>sample_strat</code><a class="anchor" aria-label="anchor" href="#sstrat"></a>
</h2>
<p>The <code><a href="../reference/sample_strat.html">sample_strat()</a></code> contains two <code>method</code>s to
perform sampling:</p>
<ul>
<li><p><code>"Queinnec"</code> - Hierarchical sampling using a focal
window to isolate contiguous groups of stratum pixels, which was
originally developed by Martin Queinnec.</p></li>
<li><p><code>"random"</code> - Traditional stratified random sampling.
This <code>method</code> ignores much of the functionality of the
algorithm to allow users the capability to use standard stratified
random sampling approaches without the use of a focal window to locate
contiguous stratum cells.</p></li>
</ul>
<div class="section level3 unnumbered">
<h3 class="unnumbered" id="queinnec">
<code>method = "Queinnec"</code><a class="anchor" aria-label="anchor" href="#queinnec"></a>
</h3>
<p><em>Queinnec, M., White, J. C., &amp; Coops, N. C. (2021). Comparing
airborne and spaceborne photon-counting LiDAR canopy structural
estimates across different boreal forest types. Remote Sensing of
Environment, 262(August 2020), 112510.</em></p>
<p>This algorithm uses moving window (<code>wrow</code> and
<code>wcol</code> parameters) to filter the input <code>sraster</code>
to prioritize sample locations where stratum pixels are spatially
grouped, rather than dispersed individuals across the landscape.</p>
<p>Sampling is performed using 2 rules:</p>
<ul>
<li><p><strong>Rule 1</strong> - Sample within spatially grouped stratum
pixels. Moving window defined by <code>wrow</code> and
<code>wcol</code>.</p></li>
<li><p><strong>Rule 2</strong> - If no more samples exist to satisfy
desired sampling count, individual stratum pixels are sampled.</p></li>
</ul>
<p>The rule applied to a select a particular sample is defined in the
<code>rule</code> attribute of output samples. We give a few examples
below:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- perform stratified sampling random sampling ---#</span></span>
<span><span class="fu"><a href="../reference/sample_strat.html">sample_strat</a></span><span class="op">(</span>sraster <span class="op">=</span> <span class="va">sraster</span>, <span class="co"># input sraster</span></span>
<span>             nSamp <span class="op">=</span> <span class="fl">200</span>, <span class="co"># desired sample number</span></span>
<span>             plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 200 features and 3 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431110 ymin: 5337710 xmax: 438550 ymax: 5343230</span></span>
<span><span class="co">#&gt; CRS:           NA</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    strata type  rule               geometry</span></span>
<span><span class="co">#&gt; x       1  new rule1 POINT (435910 5342350)</span></span>
<span><span class="co">#&gt; x1      1  new rule2 POINT (437590 5339030)</span></span>
<span><span class="co">#&gt; x2      1  new rule2 POINT (438550 5338270)</span></span>
<span><span class="co">#&gt; x3      1  new rule2 POINT (434810 5341810)</span></span>
<span><span class="co">#&gt; x4      1  new rule2 POINT (434390 5341930)</span></span>
<span><span class="co">#&gt; x5      1  new rule2 POINT (436790 5338150)</span></span>
<span><span class="co">#&gt; x6      1  new rule2 POINT (435850 5339290)</span></span>
<span><span class="co">#&gt; x7      1  new rule2 POINT (437490 5342590)</span></span>
<span><span class="co">#&gt; x8      1  new rule2 POINT (437950 5343230)</span></span>
<span><span class="co">#&gt; x9      1  new rule2 POINT (438010 5337970)</span></span></code></pre>
<p>In some cases, users might want to include <code>existing</code>
samples within the algorithm. In order to adjust the total number of
samples needed per stratum to reflect those already present in
<code>existing</code>, we can use the intermediate function
<code><a href="../reference/extract_strata.html">extract_strata()</a></code>.</p>
<p>This function uses the <code>sraster</code> and <code>existing</code>
samples and extracts the stratum for each. These samples can be included
within <code><a href="../reference/sample_strat.html">sample_strat()</a></code>, which adjusts total samples required
per class based on representation in <code>existing</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- extract strata values to existing samples ---#              </span></span>
<span><span class="va">e.sr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_strata.html">extract_strata</a></span><span class="op">(</span>sraster <span class="op">=</span> <span class="va">sraster</span>, <span class="co"># input sraster</span></span>
<span>                       existing <span class="op">=</span> <span class="va">existing</span><span class="op">)</span> <span class="co"># existing samples to add strata value to</span></span></code></pre></div>
<p>Notice that <code>e.sr</code> now has an attribute named strata. If
that parameter is not there, <code><a href="../reference/sample_strat.html">sample_strat()</a></code> will give an
error.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sample_strat.html">sample_strat</a></span><span class="op">(</span>sraster <span class="op">=</span> <span class="va">sraster</span>, <span class="co"># input sraster</span></span>
<span>             nSamp <span class="op">=</span> <span class="fl">200</span>, <span class="co"># desired sample number</span></span>
<span>             access <span class="op">=</span> <span class="va">access</span>, <span class="co"># define access road network</span></span>
<span>             existing <span class="op">=</span> <span class="va">e.sr</span>, <span class="co"># existing samples with strata values</span></span>
<span>             mindist <span class="op">=</span> <span class="fl">200</span>, <span class="co"># minimum distance samples must be apart from one another</span></span>
<span>             buff_inner <span class="op">=</span> <span class="fl">50</span>, <span class="co"># inner buffer - no samples within this distance from road</span></span>
<span>             buff_outer <span class="op">=</span> <span class="fl">200</span>, <span class="co"># outer buffer - no samples further than this distance from road</span></span>
<span>             plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 400 features and 3 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431130 ymin: 5337730 xmax: 438550 ymax: 5343230</span></span>
<span><span class="co">#&gt; CRS:           NA</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    strata     type     rule               geometry</span></span>
<span><span class="co">#&gt; 1       1 existing existing POINT (434670 5342470)</span></span>
<span><span class="co">#&gt; 2       1 existing existing POINT (431250 5341750)</span></span>
<span><span class="co">#&gt; 3       1 existing existing POINT (438010 5341090)</span></span>
<span><span class="co">#&gt; 4       1 existing existing POINT (434710 5337750)</span></span>
<span><span class="co">#&gt; 5       1 existing existing POINT (435110 5342790)</span></span>
<span><span class="co">#&gt; 6       1 existing existing POINT (435730 5339550)</span></span>
<span><span class="co">#&gt; 7       1 existing existing POINT (435610 5343070)</span></span>
<span><span class="co">#&gt; 8       1 existing existing POINT (436110 5337850)</span></span>
<span><span class="co">#&gt; 9       1 existing existing POINT (436790 5338150)</span></span>
<span><span class="co">#&gt; 10      1 existing existing POINT (437910 5343150)</span></span></code></pre>
<p>As seen on the code in the example above, the defined
<code>mindist</code> parameter specifies the minimum euclidean distance
that samples must be apart from one another.</p>
<p>Notice that the sample outputs have <code>type</code> and
<code>rule</code> attributes which outline whether the samples are
<code>existing</code> or <code>new</code> and whether <code>rule1</code>
or <code>rule2</code> were used to select the individual samples. If
<code>type</code> is <em>existing</em> (a user provided
<code>existing</code> sample), <code>rule</code> will be
<em>existing</em> as well as seen above.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sample_strat.html">sample_strat</a></span><span class="op">(</span>sraster <span class="op">=</span> <span class="va">sraster</span>, <span class="co"># input</span></span>
<span>             nSamp <span class="op">=</span> <span class="fl">200</span>, <span class="co"># desired sample number</span></span>
<span>             access <span class="op">=</span> <span class="va">access</span>, <span class="co"># define access road network</span></span>
<span>             existing <span class="op">=</span> <span class="va">e.sr</span>, <span class="co"># existing samples with strata values</span></span>
<span>             include <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># include existing plots in nSamp total</span></span>
<span>             buff_outer <span class="op">=</span> <span class="fl">200</span>, <span class="co"># outer buffer - no samples further than this distance from road</span></span>
<span>             plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 200 features and 3 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431130 ymin: 5337730 xmax: 438550 ymax: 5343190</span></span>
<span><span class="co">#&gt; CRS:           NA</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    strata     type     rule               geometry</span></span>
<span><span class="co">#&gt; 1       1 existing existing POINT (434670 5342470)</span></span>
<span><span class="co">#&gt; 2       1 existing existing POINT (431250 5341750)</span></span>
<span><span class="co">#&gt; 3       1 existing existing POINT (438010 5341090)</span></span>
<span><span class="co">#&gt; 4       1 existing existing POINT (434710 5337750)</span></span>
<span><span class="co">#&gt; 5       1 existing existing POINT (435110 5342790)</span></span>
<span><span class="co">#&gt; 6       1 existing existing POINT (435730 5339550)</span></span>
<span><span class="co">#&gt; 7       1 existing existing POINT (435610 5343070)</span></span>
<span><span class="co">#&gt; 8       1 existing existing POINT (436110 5337850)</span></span>
<span><span class="co">#&gt; 9       1 existing existing POINT (436790 5338150)</span></span>
<span><span class="co">#&gt; 10      1 existing existing POINT (437910 5343150)</span></span></code></pre>
<p>The <code>include</code> parameter determines whether
<code>existing</code> samples should be included in the total count of
samples defined by <code>nSamp</code>. By default, the
<code>include</code> parameter is set as <code>FALSE</code>.</p>
</div>
<div class="section level3 unnumbered">
<h3 class="unnumbered" id="stratrandom">
<code>method = "random</code><a class="anchor" aria-label="anchor" href="#stratrandom"></a>
</h3>
<p>Stratified random sampling with equal probability for all cells
(using default algorithm values for <code>mindist</code> and no use of
<code>access</code> functionality). In essence this method perform the
<code>sample_srs</code> algorithm for each stratum separately to meet
the specified sample allocation.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- perform stratified sampling random sampling ---#</span></span>
<span><span class="fu"><a href="../reference/sample_strat.html">sample_strat</a></span><span class="op">(</span>sraster <span class="op">=</span> <span class="va">sraster</span>, <span class="co"># input sraster</span></span>
<span>             method <span class="op">=</span> <span class="st">"random"</span>, <span class="co">#stratified random sampling</span></span>
<span>             nSamp <span class="op">=</span> <span class="fl">200</span>, <span class="co"># desired sample number</span></span>
<span>             plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 200 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431130 ymin: 5337710 xmax: 438530 ymax: 5343230</span></span>
<span><span class="co">#&gt; Projected CRS: UTM Zone 17, Northern Hemisphere</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    strata               geometry</span></span>
<span><span class="co">#&gt; 1       1 POINT (438010 5339130)</span></span>
<span><span class="co">#&gt; 2       1 POINT (438010 5339130)</span></span>
<span><span class="co">#&gt; 3       1 POINT (435030 5341650)</span></span>
<span><span class="co">#&gt; 4       1 POINT (437110 5338490)</span></span>
<span><span class="co">#&gt; 5       1 POINT (433270 5341050)</span></span>
<span><span class="co">#&gt; 6       1 POINT (437970 5342330)</span></span>
<span><span class="co">#&gt; 7       1 POINT (433510 5340550)</span></span>
<span><span class="co">#&gt; 8       1 POINT (433350 5341090)</span></span>
<span><span class="co">#&gt; 9       1 POINT (437010 5338090)</span></span>
<span><span class="co">#&gt; 10      1 POINT (437370 5338070)</span></span></code></pre>
</div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="nc">
<code>sample_nc</code><a class="anchor" aria-label="anchor" href="#nc"></a>
</h2>
<p><code><a href="../reference/sample_nc.html">sample_nc()</a></code> function implements the Nearest Centroid
sampling algorithm described in <a href="https://doi.org/10.1080/00049158.2016.1218265" class="external-link">Melville &amp;
Stone (2016)</a>. The algorithm uses kmeans clustering where the number
of clusters (centroids) is equal to the desired number of samples
(<code>nSamp</code>). Cluster centers are located, which then prompts
the nearest neighbour <code>mraster</code> pixel for each cluster to be
located (assuming default <code>k</code> parameter). These nearest
neighbours are the output samples. Basic usage is as follows:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- perform simple random sampling ---#</span></span>
<span><span class="fu"><a href="../reference/sample_nc.html">sample_nc</a></span><span class="op">(</span>mraster <span class="op">=</span> <span class="va">mraster</span>, <span class="co"># input</span></span>
<span>          nSamp <span class="op">=</span> <span class="fl">25</span>, <span class="co"># desired sample number</span></span>
<span>          plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; K-means being performed on 3 layers with 25 centers.</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 25 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431710 ymin: 5337750 xmax: 438510 ymax: 5342790</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;         zq90  pzabove2  zsd kcenter               geometry</span></span>
<span><span class="co">#&gt; 77955   3.01  8.400001 0.57       1 POINT (438510 5339070)</span></span>
<span><span class="co">#&gt; 36358   6.29 14.600000 1.67       2 POINT (434630 5341290)</span></span>
<span><span class="co">#&gt; 97959  15.20 95.099998 2.65       3 POINT (435750 5337990)</span></span>
<span><span class="co">#&gt; 102498  6.96 77.599998 1.57       4 POINT (437010 5337750)</span></span>
<span><span class="co">#&gt; 12484  15.10 19.600000 4.54       5 POINT (434590 5342570)</span></span>
<span><span class="co">#&gt; 50453  11.80 73.099998 3.03       6 POINT (433050 5340530)</span></span>
<span><span class="co">#&gt; 65609  17.20 54.400002 4.96       7 POINT (437770 5339730)</span></span>
<span><span class="co">#&gt; 86019   8.55 39.600002 2.22       8 POINT (435670 5338630)</span></span>
<span><span class="co">#&gt; 34237  13.80 88.700005 3.35       9 POINT (436970 5341410)</span></span>
<span><span class="co">#&gt; 35028  16.40 87.700005 4.07      10 POINT (437870 5341370)</span></span></code></pre>
<p>Altering the <code>k</code> parameter leads to a multiplicative
increase in output samples where total output samples = <span class="math inline">\(`nSamp` * `k`\)</span>.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- perform simple random sampling ---#</span></span>
<span><span class="va">samples</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_nc.html">sample_nc</a></span><span class="op">(</span>mraster <span class="op">=</span> <span class="va">mraster</span>, <span class="co"># input</span></span>
<span>                    k <span class="op">=</span> <span class="fl">2</span>, <span class="co"># number of nearest neighbours to take for each kmeans center</span></span>
<span>                    nSamp <span class="op">=</span> <span class="fl">25</span>, <span class="co"># desired sample number</span></span>
<span>                    plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; K-means being performed on 3 layers with 25 centers.</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#--- total samples = nSamp * k (25 * 2) = 50 ---#</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">samples</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 50</span></span></code></pre></div>
<p>Visualizing what the kmeans centers and samples nearest neighbours
looks like is possible when using <code>details = TRUE</code>. The
<code>$kplot</code> output provides a quick visualization of where the
centers are based on a scatter plot of the first 2 layers in
<code>mraster</code>. Notice that the centers are well distributed in
covariate space and chosen samples are the closest pixels to each center
(nearest neighbours).</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- perform simple random sampling with details ---#</span></span>
<span><span class="va">details</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_nc.html">sample_nc</a></span><span class="op">(</span>mraster <span class="op">=</span> <span class="va">mraster</span>, <span class="co"># input</span></span>
<span>                     nSamp <span class="op">=</span> <span class="fl">25</span>, <span class="co"># desired sample number</span></span>
<span>                     details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; K-means being performed on 3 layers with 25 centers.</span></span>
<span></span>
<span><span class="co">#--- plot ggplot output ---#</span></span>
<span></span>
<span><span class="va">details</span><span class="op">$</span><span class="va">kplot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="clhs">
<code>sample_clhs</code><a class="anchor" aria-label="anchor" href="#clhs"></a>
</h2>
<p><code><a href="../reference/sample_clhs.html">sample_clhs()</a></code> function implements conditioned Latin
hypercube (clhs) sampling methodology from the <a href="https://CRAN.R-project.org/package=clhs/" class="external-link"><code>clhs</code></a>
package. A number of other functions in the <code>sgsR</code> package
help to provide guidance on clhs sampling including
<code><a href="../reference/calculate_pop.html">calculate_pop()</a></code> and <code><a href="../reference/calculate_lhsOpt.html">calculate_lhsOpt()</a></code>. Check
out these functions to better understand how sample numbers could be
optimized.</p>
<p>The syntax for this function is similar to others shown above,
although parameters like <code>iter</code>, which define the number of
iterations within the Metropolis-Hastings process are important to
consider. In these examples we use a low <code>iter</code> value because
it takes less time to run. Default values for <code>iter</code> within
the <code>clhs</code> package are 10,000.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sample_clhs.html">sample_clhs</a></span><span class="op">(</span>mraster <span class="op">=</span> <span class="va">mraster</span>, <span class="co"># input</span></span>
<span>            nSamp <span class="op">=</span> <span class="fl">200</span>, <span class="co"># desired sample number</span></span>
<span>            plot <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># plot </span></span>
<span>            iter <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="co"># number of iterations</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sample_clhs.html">sample_clhs</a></span><span class="op">(</span>mraster <span class="op">=</span> <span class="va">mraster</span>, <span class="co"># input</span></span>
<span>            nSamp <span class="op">=</span> <span class="fl">300</span>, <span class="co"># desired sample number</span></span>
<span>            iter <span class="op">=</span> <span class="fl">100</span>, <span class="co"># number of iterations</span></span>
<span>            existing <span class="op">=</span> <span class="va">existing</span>, <span class="co"># existing samples</span></span>
<span>            access <span class="op">=</span> <span class="va">access</span>, <span class="co"># define access road network</span></span>
<span>            buff_inner <span class="op">=</span> <span class="fl">100</span>, <span class="co"># inner buffer - no samples within this distance from road</span></span>
<span>            buff_outer <span class="op">=</span> <span class="fl">300</span>, <span class="co"># outer buffer - no samples further than this distance from road</span></span>
<span>            plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
<p>The <code>cost</code> parameter defines the <code>mraster</code>
covariate, which is used to constrain the clhs sampling. This could be
any number of variables. An example could be the distance a pixel is
from road <code>access</code> (e.g. from
<code><a href="../reference/calculate_distance.html">calculate_distance()</a></code> see example below), terrain slope, the
output from <code><a href="../reference/calculate_coobs.html">calculate_coobs()</a></code>, or many others.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- cost constrained examples ---#</span></span>
<span><span class="co">#--- calculate distance to access layer for each pixel in mr ---#</span></span>
<span><span class="va">mr.c</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_distance.html">calculate_distance</a></span><span class="op">(</span>raster <span class="op">=</span> <span class="va">mraster</span>, <span class="co"># input</span></span>
<span>                           access <span class="op">=</span> <span class="va">access</span>,</span>
<span>                           plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># define access road network</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-20-1.png" width="700"></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sample_clhs.html">sample_clhs</a></span><span class="op">(</span>mraster <span class="op">=</span> <span class="va">mr.c</span>, <span class="co"># input</span></span>
<span>            nSamp <span class="op">=</span> <span class="fl">250</span>, <span class="co"># desired sample number</span></span>
<span>            iter <span class="op">=</span> <span class="fl">100</span>, <span class="co"># number of iterations</span></span>
<span>            cost <span class="op">=</span> <span class="st">"dist2access"</span>, <span class="co"># cost parameter - name defined in calculate_distance()</span></span>
<span>            plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-22-1.png" width="700"></p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="balanced">
<code>sample_balanced</code><a class="anchor" aria-label="anchor" href="#balanced"></a>
</h2>
<p>The <code><a href="../reference/sample_balanced.html">sample_balanced()</a></code> algorithm performs a balanced
sampling methodology from the <a href="http://www.antongrafstrom.se/balancedsampling/" class="external-link"><code>stratifyR / SamplingBigData</code></a>
packages.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sample_balanced.html">sample_balanced</a></span><span class="op">(</span>mraster <span class="op">=</span> <span class="va">mraster</span>, <span class="co"># input</span></span>
<span>                nSamp <span class="op">=</span> <span class="fl">200</span>, <span class="co"># desired sample number</span></span>
<span>                plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-23-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 200 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431150 ymin: 5337710 xmax: 438550 ymax: 5343210</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                  geometry</span></span>
<span><span class="co">#&gt; 1  POINT (438530 5343210)</span></span>
<span><span class="co">#&gt; 2  POINT (434130 5343190)</span></span>
<span><span class="co">#&gt; 3  POINT (435930 5343190)</span></span>
<span><span class="co">#&gt; 4  POINT (436330 5343170)</span></span>
<span><span class="co">#&gt; 5  POINT (431630 5343150)</span></span>
<span><span class="co">#&gt; 6  POINT (433010 5343150)</span></span>
<span><span class="co">#&gt; 7  POINT (432230 5343130)</span></span>
<span><span class="co">#&gt; 8  POINT (432030 5343090)</span></span>
<span><span class="co">#&gt; 9  POINT (434230 5343090)</span></span>
<span><span class="co">#&gt; 10 POINT (433570 5343010)</span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sample_balanced.html">sample_balanced</a></span><span class="op">(</span>mraster <span class="op">=</span> <span class="va">mraster</span>, <span class="co"># input</span></span>
<span>                nSamp <span class="op">=</span> <span class="fl">100</span>, <span class="co"># desired sample number</span></span>
<span>                algorithm <span class="op">=</span> <span class="st">"lcube"</span>, <span class="co"># algorithm type</span></span>
<span>                access <span class="op">=</span> <span class="va">access</span>, <span class="co"># define access road network</span></span>
<span>                buff_inner <span class="op">=</span> <span class="fl">50</span>, <span class="co"># inner buffer - no samples within this distance from road</span></span>
<span>                buff_outer <span class="op">=</span> <span class="fl">200</span><span class="op">)</span> <span class="co"># outer buffer - no samples further than this distance from road</span></span>
<span><span class="co">#&gt; Simple feature collection with 100 features and 0 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431230 ymin: 5337850 xmax: 438550 ymax: 5343210</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;                  geometry</span></span>
<span><span class="co">#&gt; 1  POINT (435290 5338890)</span></span>
<span><span class="co">#&gt; 2  POINT (434490 5338470)</span></span>
<span><span class="co">#&gt; 3  POINT (435850 5340150)</span></span>
<span><span class="co">#&gt; 4  POINT (433630 5341650)</span></span>
<span><span class="co">#&gt; 5  POINT (432670 5340670)</span></span>
<span><span class="co">#&gt; 6  POINT (436350 5341590)</span></span>
<span><span class="co">#&gt; 7  POINT (437430 5339110)</span></span>
<span><span class="co">#&gt; 8  POINT (436270 5339350)</span></span>
<span><span class="co">#&gt; 9  POINT (436350 5340730)</span></span>
<span><span class="co">#&gt; 10 POINT (436550 5337890)</span></span></code></pre></div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="ahels">
<code>sample_ahels</code><a class="anchor" aria-label="anchor" href="#ahels"></a>
</h2>
<p>The <code><a href="../reference/sample_ahels.html">sample_ahels()</a></code> function performs the adapted
Hypercube Evaluation of a Legacy Sample (ahels) algorithm
using<code>existing</code> sample data and an <code>mraster</code>. New
samples are allocated based on quantile ratios between the
<code>existing</code> sample and <code>mraster</code> covariate
dataset.</p>
<p>This algorithm was adapted from that presented in the paper below,
which we highly recommend.</p>
<p><em>Malone BP, Minansy B, Brungard C. 2019. Some methods to improve
the utility of conditioned Latin hypercube sampling. PeerJ 7:e6451 DOI
10.7717/peerj.6451</em></p>
<p>This algorithm:</p>
<ol style="list-style-type: decimal">
<li><p>Determines the quantile distributions of <code>existing</code>
samples and <code>mraster</code> covariates.</p></li>
<li><p>Determines quantiles where there is a disparity between samples
and covariates.</p></li>
<li><p>Prioritizes sampling within those quantile to improve
representation.</p></li>
</ol>
<p>To use this function, user must first specify the number of quantiles
(<code>nQuant</code>) followed by either the <code>nSamp</code> (total
number of desired samples to be added) or the <code>threshold</code>
(sampling ratio vs. covariate coverage ratio for quantiles - default is
0.9) parameters. We recommended you setting the <code>threshold</code>
values at or below 0.9.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sample_ahels.html">sample_ahels</a></span><span class="op">(</span>mraster <span class="op">=</span> <span class="va">mraster</span>, </span>
<span>             existing <span class="op">=</span> <span class="va">existing</span>, <span class="co"># existing samples</span></span>
<span>             plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-26-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 262 features and 7 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431130 ymin: 5337710 xmax: 438550 ymax: 5343230</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;      type.x  zq90 pzabove2  zsd strata type.y  rule</span></span>
<span><span class="co">#&gt; 1  existing 10.30     62.6 2.66      1    new rule1</span></span>
<span><span class="co">#&gt; 2  existing  8.69      9.8 2.76      1    new rule2</span></span>
<span><span class="co">#&gt; 3  existing  9.06     93.7 1.70      1    new rule2</span></span>
<span><span class="co">#&gt; 4  existing 10.60     76.0 2.43      1    new rule2</span></span>
<span><span class="co">#&gt; 5  existing  6.76     37.6 1.78      1    new rule2</span></span>
<span><span class="co">#&gt; 6  existing  8.24     35.4 2.14      1    new rule2</span></span>
<span><span class="co">#&gt; 7  existing  9.61     69.3 2.49      1    new rule2</span></span>
<span><span class="co">#&gt; 8  existing  8.32     87.0 1.94      1    new rule2</span></span>
<span><span class="co">#&gt; 9  existing  6.33     75.9 1.40      1    new rule2</span></span>
<span><span class="co">#&gt; 10 existing  3.98      5.7 0.96      1    new rule2</span></span>
<span><span class="co">#&gt;                  geometry</span></span>
<span><span class="co">#&gt; 1  POINT (434670 5342470)</span></span>
<span><span class="co">#&gt; 2  POINT (431250 5341750)</span></span>
<span><span class="co">#&gt; 3  POINT (438010 5341090)</span></span>
<span><span class="co">#&gt; 4  POINT (434710 5337750)</span></span>
<span><span class="co">#&gt; 5  POINT (435110 5342790)</span></span>
<span><span class="co">#&gt; 6  POINT (435730 5339550)</span></span>
<span><span class="co">#&gt; 7  POINT (435610 5343070)</span></span>
<span><span class="co">#&gt; 8  POINT (436110 5337850)</span></span>
<span><span class="co">#&gt; 9  POINT (436790 5338150)</span></span>
<span><span class="co">#&gt; 10 POINT (437910 5343150)</span></span></code></pre>
<p>Notice that no <code>threshold</code>, <code>nSamp</code>, or
<code>nQuant</code> were defined. That is because the default setting
for <code>threshold = 0.9</code> and <code>nQuant = 10</code>.</p>
<p>The first matrix output shows the quantile ratios between the sample
and the covariates. A value of 1.0 indicates that samples are
represented relative to the quantile coverage. Values &gt; 1.0 indicate
over representation of samples, while &lt; 1.0 indicate under
representation of samples.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sample_ahels.html">sample_ahels</a></span><span class="op">(</span>mraster <span class="op">=</span> <span class="va">mraster</span>, </span>
<span>             existing <span class="op">=</span> <span class="va">existing</span>, <span class="co"># existing samples</span></span>
<span>             nQuant <span class="op">=</span> <span class="fl">20</span>, <span class="co"># define 20 quantiles</span></span>
<span>             nSamp <span class="op">=</span> <span class="fl">300</span><span class="op">)</span> <span class="co"># total samples desired</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-29-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 500 features and 7 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431110 ymin: 5337710 xmax: 438550 ymax: 5343230</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;      type.x  zq90 pzabove2  zsd strata type.y  rule</span></span>
<span><span class="co">#&gt; 1  existing 10.30     62.6 2.66      1    new rule1</span></span>
<span><span class="co">#&gt; 2  existing  8.69      9.8 2.76      1    new rule2</span></span>
<span><span class="co">#&gt; 3  existing  9.06     93.7 1.70      1    new rule2</span></span>
<span><span class="co">#&gt; 4  existing 10.60     76.0 2.43      1    new rule2</span></span>
<span><span class="co">#&gt; 5  existing  6.76     37.6 1.78      1    new rule2</span></span>
<span><span class="co">#&gt; 6  existing  8.24     35.4 2.14      1    new rule2</span></span>
<span><span class="co">#&gt; 7  existing  9.61     69.3 2.49      1    new rule2</span></span>
<span><span class="co">#&gt; 8  existing  8.32     87.0 1.94      1    new rule2</span></span>
<span><span class="co">#&gt; 9  existing  6.33     75.9 1.40      1    new rule2</span></span>
<span><span class="co">#&gt; 10 existing  3.98      5.7 0.96      1    new rule2</span></span>
<span><span class="co">#&gt;                  geometry</span></span>
<span><span class="co">#&gt; 1  POINT (434670 5342470)</span></span>
<span><span class="co">#&gt; 2  POINT (431250 5341750)</span></span>
<span><span class="co">#&gt; 3  POINT (438010 5341090)</span></span>
<span><span class="co">#&gt; 4  POINT (434710 5337750)</span></span>
<span><span class="co">#&gt; 5  POINT (435110 5342790)</span></span>
<span><span class="co">#&gt; 6  POINT (435730 5339550)</span></span>
<span><span class="co">#&gt; 7  POINT (435610 5343070)</span></span>
<span><span class="co">#&gt; 8  POINT (436110 5337850)</span></span>
<span><span class="co">#&gt; 9  POINT (436790 5338150)</span></span>
<span><span class="co">#&gt; 10 POINT (437910 5343150)</span></span></code></pre>
<p>Notice that the total number of samples is 500. This value is the sum
of existing samples (200) and number of samples defined by
<code>nSamp = 300</code>.</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="samp-existing">
<code>sample_existing</code><a class="anchor" aria-label="anchor" href="#samp-existing"></a>
</h2>
<p>Acknowledging that <code>existing</code> sample networks exist is
important. There is significant investment into these samples, and in
order to keep inventories up-to-date, we often need to collect new data
at these locations. The <code>sample_existing</code> algorithm provides
a method for sub-sampling an <code>existing</code> sample network should
the financial / logistical resources not be available to collect data at
all sample units. The algorithm leverages latin hypercube sampling using
the <a href="https://CRAN.R-project.org/package=clhs" class="external-link">clhs</a> package
to effectively sample within an <code>existing</code> network.</p>
<p>The algorithm has two fundamental approaches:</p>
<ol style="list-style-type: decimal">
<li><p>Sample exclusively using the sample network and the attributes it
contains</p></li>
<li><p>Should <code>raster</code> information be available and
co-located with the sample, use these data as population values to
improve sub-sampling of <code>existing</code>.</p></li>
</ol>
<p>Much like the <code><a href="../reference/sample_clhs.html">sample_clhs()</a></code> algorithm, users can define
a <code>cost</code> parameter, which will be used to constrain
sub-sampling. A cost parameters is a user defined metric/attribute such
as distance from roads (e.g. <code><a href="../reference/calculate_distance.html">calculate_distance()</a></code>),
elevation, etc.</p>
<p>Here some some basic examples:</p>
<div class="section level3">
<h3 id="basic-sub-sampling-of-existing">Basic sub-sampling of <code>existing</code><a class="anchor" aria-label="anchor" href="#basic-sub-sampling-of-existing"></a>
</h3>
<p>First we can create an existing dataset for our example. Lets imagine
we have a systematically sampled dataset of ~900 samples, and we know we
only have resources to sample 300 of them. We have some ALS data
available (<code>mraster</code>), which we will use as our distributions
to sample within.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- generate existing samples and extract metrics ---#</span></span>
<span><span class="va">existing</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_systematic.html">sample_systematic</a></span><span class="op">(</span>raster <span class="op">=</span> <span class="va">mraster</span>, cellsize <span class="op">=</span> <span class="fl">200</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="../reference/extract_metrics.html">extract_metrics</a></span><span class="op">(</span>mraster <span class="op">=</span> <span class="va">mraster</span>, existing <span class="op">=</span> <span class="va">.</span><span class="op">)</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-31-1.png" width="700"></p>
<p>We see our systematic sample. Notice that we used
<code><a href="../reference/extract_metrics.html">extract_metrics()</a></code> after creating it. If the user provides a
<code>raster</code> for the algorithm this isn’t neccesary, it will be
handled internally in the algorithm if no attributes are present, but if
only samples are given, attributes must be provided and <em>sampling
will be conducted on all included attributes</em>. Now lets sub-sample
within it.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- sub sample using ---#</span></span>
<span><span class="fu"><a href="../reference/sample_existing.html">sample_existing</a></span><span class="op">(</span>existing <span class="op">=</span> <span class="va">existing</span>, <span class="co"># our existing sample</span></span>
<span>                nSamp <span class="op">=</span> <span class="fl">300</span>, <span class="co"># the number of samples we want</span></span>
<span>                plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-32-1.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 300 features and 3 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431111.3 ymin: 5337715 xmax: 438541.4 ymax: 5343221</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;      zq90 pzabove2  zsd                 geometry</span></span>
<span><span class="co">#&gt; 566 16.40     87.5 5.17 POINT (431330.1 5338476)</span></span>
<span><span class="co">#&gt; 867  6.74     31.2 1.70 POINT (437791.9 5338544)</span></span>
<span><span class="co">#&gt; 704 21.30     94.8 3.75 POINT (432559.5 5338117)</span></span>
<span><span class="co">#&gt; 884  8.00     84.2 1.76 POINT (437313.4 5338130)</span></span>
<span><span class="co">#&gt; 270 11.20     98.1 2.39 POINT (435897.6 5342089)</span></span>
<span><span class="co">#&gt; 200 10.80     61.1 2.98 POINT (435745.2 5342459)</span></span>
<span><span class="co">#&gt; 762 12.60     79.9 3.24 POINT (434930.8 5338662)</span></span>
<span><span class="co">#&gt; 528 15.70     96.0 2.48 POINT (432363.3 5339118)</span></span>
<span><span class="co">#&gt; 331 19.10     85.1 4.30 POINT (438453.9 5342710)</span></span>
<span><span class="co">#&gt; 299  2.41      2.9 0.34   POINT (437638 5342590)</span></span></code></pre>
<p>We see from the output that we get 300 samples that are a sub-sample
of the original <code>existing</code> sample. The plotted output shows
sumulative frequency distributions of the population (all
<code>existing</code> samples) and the sub-sample (the 300 samples we
requested). Notice that the distributions match quite well. This is a
simple example, so lets do another with a bit more complexity.</p>
</div>
<div class="section level3">
<h3 id="sub-sampling-using-raster-distributions">Sub-sampling using <code>raster</code> distributions<a class="anchor" aria-label="anchor" href="#sub-sampling-using-raster-distributions"></a>
</h3>
<p>Our systematic sample of ~900 plots is fairly comprehensive, however
we can generate a true population distribution through the inclusion of
the ALS metrics in the sampling process. The metrics will be included in
internal latin hypercube sampling to help guide sub-sampling of
<code>existing</code>.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- sub sample using ---#</span></span>
<span><span class="fu"><a href="../reference/sample_existing.html">sample_existing</a></span><span class="op">(</span>existing <span class="op">=</span> <span class="va">existing</span>, <span class="co"># our existing sample</span></span>
<span>                nSamp <span class="op">=</span> <span class="fl">300</span>, <span class="co"># the number of samples we want</span></span>
<span>                raster <span class="op">=</span> <span class="va">mraster</span>, <span class="co"># include mraster metrics to guide sampling of existing</span></span>
<span>                plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-33-1.png" width="700"><img src="sampling_files/figure-html/unnamed-chunk-33-2.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 300 features and 3 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431132.4 ymin: 5337705 xmax: 438520.2 ymax: 5343209</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;         zq90 pzabove2  zsd                 geometry</span></span>
<span><span class="co">#&gt; 84159  18.00     90.0 3.92 POINT (435605.5 5338075)</span></span>
<span><span class="co">#&gt; 7560   14.70     73.7 3.23 POINT (432960.3 5342393)</span></span>
<span><span class="co">#&gt; 75985  10.50     56.3 2.78 POINT (435670.4 5338967)</span></span>
<span><span class="co">#&gt; 59961  22.00     91.2 6.50   POINT (431961 5338519)</span></span>
<span><span class="co">#&gt; 25722  19.80     94.2 5.50 POINT (431568.6 5340521)</span></span>
<span><span class="co">#&gt; 26466   4.02      4.7 0.88 POINT (437746.7 5342851)</span></span>
<span><span class="co">#&gt; 7187   10.40     98.7 2.02 POINT (436888.5 5339685)</span></span>
<span><span class="co">#&gt; 73410  14.60     97.4 2.62 POINT (433930.1 5338466)</span></span>
<span><span class="co">#&gt; 1571   21.70     89.0 5.99 POINT (431709.7 5341228)</span></span>
<span><span class="co">#&gt; 769100 13.40     93.7 3.16 POINT (433636.5 5338129)</span></span></code></pre>
<p>The sample distribution again mimics the population distribution
quite well! Now lets try using a cost variable to constrain the
sub-sample.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- create distance from roads metric ---#</span></span>
<span><span class="va">dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_distance.html">calculate_distance</a></span><span class="op">(</span>raster <span class="op">=</span> <span class="va">mraster</span>, access <span class="op">=</span> <span class="va">access</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- sub sample using ---#</span></span>
<span><span class="fu"><a href="../reference/sample_existing.html">sample_existing</a></span><span class="op">(</span>existing <span class="op">=</span> <span class="va">existing</span>, <span class="co"># our existing sample</span></span>
<span>                nSamp <span class="op">=</span> <span class="fl">300</span>, <span class="co"># the number of samples we want</span></span>
<span>                raster <span class="op">=</span> <span class="va">dist</span>, <span class="co"># include mraster metrics to guide sampling of existing</span></span>
<span>                cost <span class="op">=</span> <span class="fl">4</span>, <span class="co"># either provide the index (band number) or the name of the cost layer</span></span>
<span>                plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-35-1.png" width="700"><img src="sampling_files/figure-html/unnamed-chunk-35-2.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 300 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431155 ymin: 5337780 xmax: 438531.5 ymax: 5343231</span></span>
<span><span class="co">#&gt; CRS:           +proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;         zq90 pzabove2  zsd dist2access                 geometry</span></span>
<span><span class="co">#&gt; 70134  21.80     87.8 5.97  570.241814 POINT (433114.2 5338346)</span></span>
<span><span class="co">#&gt; 1551   16.20     88.5 3.56   98.748766 POINT (432264.4 5341457)</span></span>
<span><span class="co">#&gt; 72746  25.00     98.2 7.84   98.209050 POINT (435224.4 5338999)</span></span>
<span><span class="co">#&gt; 132100 14.30     90.2 2.90  557.133687 POINT (431448.6 5341337)</span></span>
<span><span class="co">#&gt; 71921  12.20     88.1 2.79  479.011258 POINT (436703.6 5339609)</span></span>
<span><span class="co">#&gt; 51354   3.87      1.2 0.71    5.577395 POINT (435321.8 5340338)</span></span>
<span><span class="co">#&gt; 26339   5.44      8.8 1.38  166.010757 POINT (437931.6 5342928)</span></span>
<span><span class="co">#&gt; 20030  10.80     61.1 2.98  236.547099 POINT (435745.2 5342459)</span></span>
<span><span class="co">#&gt; 81529  18.20     93.1 3.80   37.240404 POINT (434158.7 5337911)</span></span>
<span><span class="co">#&gt; 54733  16.90     82.6 4.35   26.482735   POINT (435398 5340153)</span></span></code></pre>
<p>Finally, should the user wish to further constrain the sample based
on <code>access</code> like other sampling approaches in
<code>sgsR</code> that is also possible.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#--- ensure access and existing are in the same CRS ---#</span></span>
<span></span>
<span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">existing</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">access</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#--- sub sample using ---#</span></span>
<span><span class="fu"><a href="../reference/sample_existing.html">sample_existing</a></span><span class="op">(</span>existing <span class="op">=</span> <span class="va">existing</span>, <span class="co"># our existing sample</span></span>
<span>                nSamp <span class="op">=</span> <span class="fl">300</span>, <span class="co"># the number of samples we want</span></span>
<span>                raster <span class="op">=</span> <span class="va">dist</span>, <span class="co"># include mraster metrics to guide sampling of existing</span></span>
<span>                cost <span class="op">=</span> <span class="fl">4</span>, <span class="co"># either provide the index (band number) or the name of the cost layer</span></span>
<span>                access <span class="op">=</span> <span class="va">access</span>, <span class="co"># roads layer</span></span>
<span>                buff_inner <span class="op">=</span> <span class="fl">50</span>, <span class="co"># inner buffer - no samples within this distance from road</span></span>
<span>                buff_outer <span class="op">=</span> <span class="fl">300</span>, <span class="co"># outer buffer - no samples further than this distance from road</span></span>
<span>                plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># plot</span></span></code></pre></div>
<p><img src="sampling_files/figure-html/unnamed-chunk-36-1.png" width="700"><img src="sampling_files/figure-html/unnamed-chunk-36-2.png" width="700"></p>
<pre><code><span><span class="co">#&gt; Simple feature collection with 300 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 431155 ymin: 5337704 xmax: 438542.8 ymax: 5343197</span></span>
<span><span class="co">#&gt; Projected CRS: UTM_Zone_17_Northern_Hemisphere</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;         zq90 pzabove2  zsd dist2access                 geometry</span></span>
<span><span class="co">#&gt; 13688   8.52     86.5 2.18    62.00000 POINT (435821.4 5342274)</span></span>
<span><span class="co">#&gt; 132100  2.70     15.8 0.43    89.81403 POINT (437670.5 5343036)</span></span>
<span><span class="co">#&gt; 30826  22.50     97.1 5.78   142.01050 POINT (436028.9 5340196)</span></span>
<span><span class="co">#&gt; 31910  22.00     91.2 6.50   178.15515   POINT (431961 5338519)</span></span>
<span><span class="co">#&gt; 30790  13.50     79.7 3.22   102.68367 POINT (436398.7 5340349)</span></span>
<span><span class="co">#&gt; 33771  19.90     96.8 4.82   182.50673 POINT (431667.4 5338182)</span></span>
<span><span class="co">#&gt; 4477   18.70     91.5 4.41    94.50176 POINT (435496.8 5337814)</span></span>
<span><span class="co">#&gt; 40536  16.10     93.2 3.34   134.74945 POINT (434267.4 5338172)</span></span>
<span><span class="co">#&gt; 2669   14.30     65.5 4.04    48.79406 POINT (434178.4 5343111)</span></span>
<span><span class="co">#&gt; 3416   13.50     32.1 3.89    50.51348 POINT (433884.8 5342774)</span></span></code></pre>
<p>The greater constraints we add to the samples, the less likely we
will have strong correlations between the population and sample, so its
always important to understand these limitations and plan
accordingly.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://scholar.google.ca/citations?user=C_qdYDsAAAAJ&amp;hl=en" class="external-link">Tristan RH Goodbody</a>, <a href="https://forestry.ubc.ca/faculty-profile/nicholas-coops/" class="external-link">Nicholas C Coops</a>, <a href="https://www.researchgate.net/profile/Martin-Queinnec" class="external-link">Martin Queinnec</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
